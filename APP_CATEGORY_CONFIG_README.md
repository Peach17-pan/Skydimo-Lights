# 应用分类配置文件说明

## 概述

应用分类系统支持从配置文件加载进程名到类别的映射关系，无需修改代码即可添加或修改应用分类规则。

## 配置文件格式

配置文件使用简单的文本格式，每行一个映射规则：

```
进程名=类别名
```

### 格式说明

- **进程名**：Windows进程的可执行文件名（不区分大小写）
- **类别名**：应用类别，支持的值：
  - `GAME` - 游戏类
  - `VIDEO` - 电影/视频类
  - `MUSIC` - 音乐类
  - `DOCUMENT` - 文档/办公类
  - `BROWSER` - 浏览器/上网类
  - `DEVELOPMENT` - 开发/编程类
  - `CREATIVE` - 创作类

### 注释和空行

- 以 `#` 开头的行是注释，会被忽略
- 空行会被忽略
- 进程名和类别名会自动转换为小写进行比较

### 示例

```
# 游戏平台
steam.exe=GAME
epicgameslauncher.exe=GAME

# 视频播放器
vlc.exe=VIDEO
potplayermini64.exe=VIDEO

# 开发工具
code.exe=DEVELOPMENT
cursor.exe=DEVELOPMENT
```

## 配置文件位置

### 默认配置文件

程序默认会在当前工作目录查找 `app_category_config.txt` 文件。

### 自定义配置文件路径

可以通过命令行参数指定配置文件路径：

```powershell
.\build\bin\Release\app_state_monitor.exe --config my_config.txt
```

或使用短参数：

```powershell
.\build\bin\Release\app_state_monitor.exe -c my_config.txt
```

## 加载机制

1. **配置文件存在**：从配置文件加载映射关系
2. **配置文件不存在**：使用默认的硬编码映射关系（作为后备方案）
3. **配置文件格式错误**：跳过错误的行，加载正确的行；如果所有行都错误，使用默认映射

## 添加新的应用分类

### 方法1：编辑配置文件

1. 打开 `app_category_config.txt` 文件
2. 添加新行：`进程名=类别名`
3. 保存文件
4. 重启程序

### 方法2：创建自定义配置文件

1. 创建新的配置文件（如 `my_apps.txt`）
2. 添加映射规则
3. 运行程序时指定配置文件：
   ```powershell
   .\build\bin\Release\app_state_monitor.exe --config my_apps.txt
   ```

## 查找进程名

如果需要添加新应用，需要知道其进程名：

1. **方法1**：运行程序，查看输出中的"进程名称"字段
2. **方法2**：打开任务管理器，查看"详细信息"标签页中的"名称"列
3. **方法3**：使用命令行：
   ```powershell
   Get-Process | Select-Object ProcessName
   ```

## 配置文件示例

完整示例请参考 `app_category_config.txt` 文件，其中包含了常用的应用分类映射。

## 注意事项

1. **进程名格式**：使用完整的可执行文件名，包括 `.exe` 扩展名
2. **大小写**：进程名不区分大小写，但建议使用小写
3. **重复映射**：如果同一个进程名在配置文件中出现多次，后面的会覆盖前面的
4. **默认映射**：如果配置文件不存在或加载失败，程序会使用内置的默认映射，确保程序正常运行
5. **实时生效**：修改配置文件后需要重启程序才能生效

## 优先级

应用分类的优先级（从高到低）：

1. **进程名精确匹配**（从配置文件或默认映射）
2. **关键词匹配**（进程名和窗口标题中的关键词）
3. **未知类别**（如果都不匹配）

配置文件中的映射属于第1优先级，会优先于关键词匹配。

## 故障排除

### 问题：配置文件没有被加载

**检查**：
1. 确认配置文件路径正确
2. 确认文件格式正确（每行格式：`进程名=类别名`）
3. 查看程序启动时的提示信息

### 问题：某些应用仍然无法正确分类

**可能原因**：
1. 进程名不正确（检查任务管理器中的实际进程名）
2. 配置文件中的类别名拼写错误
3. 应用被关键词匹配规则覆盖（检查关键词配置）

### 问题：配置文件格式错误

**处理**：
- 程序会跳过格式错误的行，继续加载其他正确的行
- 如果所有行都错误，会使用默认映射
- 检查配置文件，确保每行格式为：`进程名=类别名`

